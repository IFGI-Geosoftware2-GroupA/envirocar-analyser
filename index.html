<!DOCTYPE html>
<html lang="de">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>enviro-analyser</title>
		<meta name="description" content="Internet Applikation zur Exploration und Visualisierung von raum-zeitvarianten Fahrzeug-Messdaten" />
		<meta name="author" content="Marius Runde" />

		<meta name="viewport" content="width=device-width; initial-scale=1.0" />

		<!-- Stylesheet, Favicon and Apple-Touch-Icon -->
		<link rel="stylesheet" href="design/style.css" />
		<link rel="shortcut icon" href="design/favicon.ico" />
		<link rel="apple-touch-icon" href="design/apple-touch-icon.png" />
		
		<!-- Google Maps API v3.14 -->
		<script type="text/javascript">
			// initialize the map
			function initialize() {
				var mapOptions = {
					center: new google.maps.LatLng(51.478333, 7.555), // center of North-Rhine-Westphalia
					mapTypeControl: true,
					mapTypeControlOptions: {
						style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
					},
					mapTypeId: google.maps.MapTypeId.ROADMAP,
					scaleControl: true,
					streetViewControl: false,
					zoom: 9,
					zoomControl: true,
					zoomControlOptions: {
						style: google.maps.ZoomControlStyle.DEFAULT
					}
				};
				var map = new google.maps.Map(document.getElementById("map"), mapOptions);
				
				// Bounds for North-Rhine-Westphalia
				var nrwBounds = new google.maps.LatLngBounds(
					new google.maps.LatLng(50.3, 5.8), // south west 
					new google.maps.LatLng(52.6, 9.5) // north east
				);
				
				// Listen for the dragend event
				google.maps.event.addListener(map, 'dragend', function() {
					// Is the map still in our bounding box of North-Rhine-Westphalia?
					if (nrwBounds.contains(map.getCenter())) {
						// YES
						return;
					} else {
						// NO
						var c = map.getCenter(),
						x = c.lng(),
						y = c.lat(),
						maxX = nrwBounds.getNorthEast().lng(),
						maxY = nrwBounds.getNorthEast().lat(),
						minX = nrwBounds.getSouthWest().lng(),
						minY = nrwBounds.getSouthWest().lat();
						
						if (x < minX) x = minX;
						if (x > maxX) x = maxX;
						if (y < minY) y = minY;
						if (y > maxY) y = maxY;
						
						map.setCenter(new google.maps.LatLng(y, x));
					}
				});
			}
			
			// load the map when the rest of the window has been loaded
			function loadScript() {
				var script = document.createElement('script');
				script.type = 'text/javascript';
				script.src = 'https://maps.googleapis.com/maps/api/js?v=3.14&key=AIzaSyAmIbYf9N82UMsx0t2-CUCNmQLhG9asRlA&sensor=true&' +
					'callback=initialize';
				document.body.appendChild(script);
			}
		</script>
		
		<!-- jQuery 2.0.3 -->
		<script src="lib/jquery-2.0.3.min.js"></script>
		
		<!-- Chart.js -->
		<script src="lib/Chart.min.js"></script>
		<script type="text/javascript">
			function initChart() {
				//Get the context of the canvas element we want to select
				var ctx = $("#chart").get(0).getContext("2d");
				
				var data = {
					labels: ["Januar", "Februar", "März", "April", "Mai", "Juni", "Juli"],
					datasets: [
						{
							fillColor: "rgba(220,220,220,0.5)",
							strokeColor: "rgba(220,220,220,1)",
							pointColor: "rgba(220,220,220,1)",
							pointStrokeColor: "#fff",
							data: [65, 59, 90, 81, 56, 55, 40]
						},
						{
							fillColor: "rgba(151,187,205,0.5)",
							strokeColor: "rgba(151,187,205,1)",
							pointColor: "rgba(151,187,205,1)",
							pointStrokeColor: "#fff",
							data: [28, 48, 40, 19, 96, 27, 100]
						}
					]
				}
				
				var myNewChart = new Chart(ctx).Line(data);
			}
		</script>
	</head>

	<body onload="loadScript();initChart();">
		<div>
			<header>
				<h1>enviro-analyser</h1>
			</header>
			<p>
				Internet Applikation zur Exploration und Visualisierung von raum-zeitvarianten Fahrzeug-Messdaten
			</p>
			<hr />
			<table>
				<tr>
					<td>
						<div id="map">
							<!-- the map will be displayed here -->
						</div>
					</td>
					<td>
						<canvas id="chart" height="400" width="600">
							<!-- the chart will be displayed here -->
						</canvas>
					</td>
				</tr>
			</table>
			<hr />
			<footer>
				<p>
					&copy; 2013 Copyright by Axel Virnich, Daniel Sawatzky, Jan-Philipp Heine, Jens Balmert, Mario Gerdes, Marius Runde und Thiemo Gärtner
				</p>
			</footer>
		</div>
	</body>
</html>
